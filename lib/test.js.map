{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///test.js","webpack:///webpack/bootstrap f78eee713be609155fc8","webpack:///./src/game.js","webpack:///./src/pieces.js","webpack:///./src/AI.js","webpack:///./src/index.js","webpack:///./test/index.js"],"names":["root","factory","exports","module","define","amd","self","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","Game","promoCallback","board","arrayIn","j","push","turn","FEN","FENboard","threefold","value","_pieces","_AI","_AI2","obj","default","piece","type","x","y","color","Piece","gameToFEN","boardToFEN","moveSelected","selected","to","promotionCallback","checkmateCallback","playAgainstAI","simulate","from","validMoves","getValidMoves","validMove","length","vm","take","paste","rook","movePiece","threefoldCheck","halfmoveClock","mode","comingAI","customAIPromotion","promotePawn","checkmateColor","checkmateValue","checkmate","move","customAIMovement","bestMove","depth","pawn","simulateAndFilter","moves","forEach","simpleMovePiece","warning","simpleMove","capturedPiece","pop","king","result","yyy","xxx","mmm","count","pieceToAN","charAt","missingPieces","FENname","ev","activeColour","castlingTarget","whiteKingMoved","blackKingMoved","possibleCastling","props","rookX","rookY","some","castlingSide","toUpperCase","enPassantTarget","fullmoveCount","initializeGame","defaultGame","allMoves","charBase","game","char","Pawn","PIECE_CHARS","Rook","Knight","knight","Bishop","bishop","Queen","queen","King","W","B","empty","last","figX","colorY","colorY2","figXArray","coef","index","one","two","coordinates","boardPiece","help","rookMoves","bishopMoves","concat","coord","xx","yy","newKingX","dir","safe","evv","evMove","rochade","_game","_game2","ChessAI","gameState","isMaximisingPlayer","currentCell","bestValue","newGameMove","undo","boradValue","minimax","alpha","beta","evaluateBoard","Math","max","min","totalEvaluation","getPieceValue","absoluteValue","_interopRequireDefault","AI","Pieces","undefined","newObj","key","_index","bestAI","console","log"],"mappings":"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","file":"test.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"rsg-chess\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"rsg-chess\"] = factory();\n\telse\n\t\troot[\"rsg-chess\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"rsg-chess\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"rsg-chess\"] = factory();\n\telse\n\t\troot[\"rsg-chess\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 4);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _pieces = __webpack_require__(1);\n\nvar _AI = __webpack_require__(2);\n\nvar _AI2 = _interopRequireDefault(_AI);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction Game(promoCallback) {\n  // the game board\n  this.board = [];\n  // fill the board\n  for (var i = 0; i < 8; i++) {\n    var arrayIn = [];\n    for (var j = 0; j < 8; j++) {\n      arrayIn.push(null);\n    }\n    this.board.push(arrayIn);\n  }\n\n  // the history of all turns\n  this.turn = [];\n  // the current FEN status\n  this.FEN = [];\n  // the current game configuration as FEN\n  this.FENboard = [];\n  // the history of all game configurations displayed using FEN\n  this.threefold = [];\n}\n\nGame.prototype.piece = function (type, x, y, color) {\n  var piece = _pieces.Piece[type](x, y, color, this);\n  this.board[y][x] = piece;\n\n  this.FEN = this.gameToFEN();\n  this.FENboard = this.boardToFEN();\n};\n\nGame.prototype.moveSelected = function (selected, to, promotionCallback, checkmateCallback, playAgainstAI, simulate) {\n  var x = to.x;\n  var y = to.y;\n\n  if (selected) {\n    var from = { x: selected.x, y: selected.y };\n\n    if (this.board[y][x] !== selected) {\n      var validMoves = selected.getValidMoves(!simulate);\n      var validMove = null;\n\n      for (var i = 0; i < validMoves.length; i++) {\n        var vm = validMoves[i];\n        if (vm.x === x && vm.y === y) {\n          validMove = vm;\n          break;\n        }\n      }\n\n      if (!validMove) return false;\n      var movePiece = validMove.movePiece;\n      var take, paste, rook;\n      if (movePiece) {\n        take = movePiece.from;\n        paste = movePiece.to;\n        if (paste === null) {\n          this.board[take.y][take.x] = null;\n        } else {\n          rook = this.board[take.y][take.x];\n          this.board[paste.y][paste.x] = rook;\n          rook.x = paste.x;\n          rook.y = paste.y;\n          this.board[take.y][take.x] = null;\n        }\n      }\n\n      var piece = this.board[y][x] ? this.board[y][x] : null;\n      movePiece = movePiece ? validMove.movePiece : null;\n      this.turn.push({\n        from: from,\n        to: to,\n        color: selected.color,\n        type: selected.type,\n        piece: piece,\n        movePiece: movePiece\n      });\n\n      this.board[y][x] = selected;\n      this.board[selected.y][selected.x] = null;\n      this.board[y][x].x = x;\n      this.board[y][x].y = y;\n\n      this.FEN = this.gameToFEN();\n      this.FENboard = this.boardToFEN();\n      // check for threefold repetition\n\n      this.threefold.push(this.FENboard);\n      if (selected.type === 'pawn' || piece) this.threefold = [];\n      if (this.threefoldCheck()) checkmateCallback('D');\n\n      // check for the fifty-move rule\n      if (this.halfmoveClock() >= 50) checkmateCallback('D');\n\n      // check for pawn promotion\n      if (selected.type === 'pawn') {\n        if (selected.color === 'W' && y === 0 || selected.color === 'B' && y === 7) {\n          if (promotionCallback) {\n            if (playAgainstAI && !playAgainstAI.mode && playAgainstAI.comingAI && selected.color === 'B') {\n              playAgainstAI.customAIPromotion ? playAgainstAI.customAIPromotion() : this.promotePawn(selected, x, y, selected.color, 'queen');\n            } else {\n              promotionCallback(selected, x, y, selected.color);\n            }\n          }\n        }\n      };\n\n      var checkmateColor = selected.color === 'W' ? 'B' : 'W';\n      var checkmateValue = this.checkmate(checkmateColor);\n      if (checkmateValue) checkmateCallback(checkmateValue);\n\n      // Play AI\n      if (playAgainstAI && playAgainstAI.mode && playAgainstAI.move) {\n        if (playAgainstAI.customAIMovement) {\n          playAgainstAI.customAIMovement();\n        } else {\n          var bestMove = (0, _AI2.default)(playAgainstAI.depth, this, false);\n          this.moveSelected(this.board[bestMove.from.y][bestMove.from.x], bestMove.to, promotionCallback, checkmateCallback, false, true, simulate);\n        }\n      }\n      // end\n    }\n    selected = null;\n    return true;\n  }\n};\n\nGame.prototype.promotePawn = function (pawn, x, y, color, type) {\n  this.piece(type, x, y, color);\n};\n\nGame.prototype.simulateAndFilter = function (moves, piece) {\n  var validMoves = [];\n  var self = this;\n  var board = this.board;\n\n  moves.forEach(function (move, i) {\n    var y = move.y;\n    var x = move.x;\n    var from = { x: piece.x, y: piece.y };\n    var movePiece = board[y][x] ? {\n      piece: board[y][x],\n      from: { x: x, y: y },\n      to: null\n    } : null;\n\n    if (move.movePiece) movePiece = move.movePiece;\n    if (movePiece) self.simpleMovePiece(movePiece.piece, movePiece.from, movePiece.to);\n\n    self.simpleMovePiece(piece, from, { x: x, y: y });\n    var warning = self.warning(piece.color);\n\n    // Return king\n    self.simpleMovePiece(piece, { x: x, y: y }, from);\n\n    // return the movePiece with simpleMovePiece() method\n    if (movePiece) self.simpleMovePiece(movePiece.piece, movePiece.to, movePiece.from);\n\n    if (!warning) validMoves.push(move);\n  });\n  return validMoves;\n};\n\nGame.prototype.checkmate = function (color) {\n  // using let will allow us to make the code a bit simpler\n  for (var i = 0; i < 8; i++) {\n    for (var j = 0; j < 8; j++) {\n      if (this.board[i][j] && this.board[i][j].color === color && this.board[i][j].getValidMoves(true).length) return false;\n    }\n  }\n  if (this.warning(color)) return color;\n  return 'D';\n};\n\nGame.prototype.simpleMovePiece = function (piece, from, to) {\n  var board = this.board;\n  if (to) {\n    board[to.y][to.x] = piece;\n    piece.x = to.x;\n    piece.y = to.y;\n  }\n  if (from) board[from.y][from.x] = null;\n};\n\nGame.prototype.simpleMove = function (move) {\n  var self = this;\n  var board = self.board;\n  var from = move.from;\n  var to = move.to;\n  var piece = board[from.y][from.x];\n  var capturedPiece = this.board[to.y][to.x] ? this.board[to.y][to.x] : null;\n  var movePiece = board[to.y][to.x] ? {\n    piece: board[to.y][to.x],\n    from: { x: to.x, y: to.y },\n    to: null\n  } : null;\n\n  this.turn.push({\n    from: from,\n    to: { x: to.x, y: to.y },\n    color: move.color,\n    type: piece.type,\n    piece: capturedPiece,\n    movePiece: movePiece\n  });\n\n  if (to.movePiece) movePiece = to.movePiece;\n  if (movePiece) self.simpleMovePiece(movePiece.piece, movePiece.from, movePiece.to);\n  self.simpleMovePiece(piece, from, { x: to.x, y: to.y });\n\n  return function () {\n    // return the current move /ev/\n    if (movePiece) self.simpleMovePiece(movePiece.piece, movePiece.to, movePiece.from);\n    self.simpleMovePiece(piece, { x: to.x, y: to.y }, from);\n    if (capturedPiece) board[to.y][to.x] = capturedPiece;\n    self.turn.pop();\n  };\n};\n\nGame.prototype.warning = function (color) {\n  var result = false;\n  var king;\n\n  this.board.forEach(function (yyy) {\n    yyy.forEach(function (xxx) {\n      if (xxx && xxx.color === color && xxx.type === 'king') {\n        king = xxx;\n      }\n    });\n  });\n\n  this.board.forEach(function (yyy) {\n    yyy.forEach(function (xxx) {\n      if (xxx && xxx.color !== color) {\n        xxx.getValidMoves().forEach(function (mmm) {\n          if (mmm.x === king.x && mmm.y === king.y) result = true;\n        });\n      }\n    });\n  });\n  return result;\n};\n\nGame.prototype.threefoldCheck = function () {\n  var threefold = this.threefold;\n  var length = threefold.length;\n\n  for (var i = 0; i < length; i++) {\n    // using let will allow us to make the code simpler\n    var count = 0;\n    for (var j = i + 1; j < length; j++) {\n      if (threefold[i] === threefold[j]) count += 1;\n    }\n    if (count >= 2) return true;\n  }\n\n  return false;\n};\n\nGame.prototype.pieceToAN = function (x, y) {\n  var xChars = 'abcdefgh';\n  return xChars.charAt(x) + (8 - y);\n};\n\n// Support FEN functions in the API\nGame.prototype.boardToFEN = function () {\n  var board = this.board;\n\n  // Convert the board configuration into FEN\n  var FENboard = '';\n  var missingPieces = 0;\n  for (var i = 0; i < 8; i++) {\n    for (var j = 0; j < 8; j++) {\n      if (board[i][j]) {\n        if (missingPieces) FENboard += missingPieces;\n        missingPieces = 0;\n        FENboard += board[i][j].FENname;\n      } else {\n        missingPieces++;\n      }\n    }\n    if (missingPieces) FENboard += missingPieces;\n    missingPieces = 0;\n    FENboard += i < 7 ? '/' : '';\n  }\n\n  return FENboard;\n};\n\nGame.prototype.halfmoveClock = function () {\n  var turn = this.turn;\n  var length = turn.length;\n  var count = 0;\n  if (turn.length === 0) return count;\n\n  var ev = turn[length - 1 - count];\n  while (count <= length - 1 && ev.type !== 'pawn' && !ev.piece) {\n    count++;\n    ev = turn[length - 1 - count];\n  }\n\n  return count;\n};\n\nGame.prototype.activeColour = function () {\n  var turn = this.turn;\n  var activeColor = turn.length && turn[turn.length - 1].color === 'W' ? 'b' : 'w';\n\n  return activeColor;\n};\n\nGame.prototype.castlingTarget = function () {\n  var board = this.board;\n  var turn = this.turn;\n  var possibleCastling = '';\n\n  var whiteKingMoved;\n  var blackKingMoved;\n  turn.forEach(function (turn) {\n    whiteKingMoved = turn.type === 'king' && turn.color === 'W';\n    blackKingMoved = turn.type === 'king' && turn.color === 'B';\n  });\n\n  [[7, 0], [0, 0], [7, 7], [0, 7]].forEach(function (props) {\n    var rookX = props[0];\n    var rookY = props[1];\n    var rook = board[rookY][rookX];\n\n    if (rookY === 7 && whiteKingMoved) return;\n    if (rookY === 0 && blackKingMoved) return;\n\n    // Check rook on position\n    if (!rook || !rook.type === 'rook') return;\n\n    // Check rook hasn't moved\n    if (turn.some(function (ev) {\n      if (ev.type !== 'rook') return false;\n      return ev.from.x === rookX && ev.from.y === rookY;\n    })) return;\n\n    var castlingSide = rookX === 0 ? 'q' : 'k';\n    possibleCastling += rookY === 0 ? castlingSide.toUpperCase() : castlingSide;\n  });\n\n  if (!possibleCastling) possibleCastling = '-';\n  return possibleCastling;\n};\n\nGame.prototype.enPassantTarget = function () {\n  var turn = this.turn;\n  var enPassantTarget = '';\n\n  if (turn.length) {\n    var ev = turn[turn.length - 1];\n    if (ev.color === 'W' && ev.to.y === 4) {\n      enPassantTarget = this.pieceToAN(ev.to.x, ev.to.y + 1);\n    }\n\n    if (ev.color === 'B' && ev.to.y === 3) {\n      enPassantTarget = this.pieceToAN(ev.to.x, ev.to.y - 1);\n    }\n  }\n\n  if (!enPassantTarget) enPassantTarget = '-';\n  return enPassantTarget;\n};\n\nGame.prototype.fullmoveCount = function () {\n  var count = 1;\n  this.turn.forEach(function (ev) {\n    if (ev.color === 'B') count += 1;\n  });\n\n  return count;\n};\n\nGame.prototype.gameToFEN = function () {\n  var FEN = '';\n\n  // Check the board configuration\n  FEN += this.boardToFEN();\n\n  // Find the active colour\n  FEN += ' ' + this.activeColour();\n\n  // Check castling availability\n  FEN += ' ' + this.castlingTarget();\n\n  // Check the En-passant target\n  FEN += ' ' + this.enPassantTarget();\n\n  // Add the halfmove clock\n  FEN += ' ' + this.halfmoveClock();\n\n  // Add the fullmove number\n  FEN += ' ' + this.fullmoveCount();\n\n  /*\r\n    More information about the FEN notation:\r\n    https://en.wikipedia.org/wiki/Forsyth%E2%80%93Edwards_Notation\r\n    https://chessprogramming.wikispaces.com/Forsyth-Edwards+Notation\r\n  */\n\n  return FEN;\n};\n\n// Set up default game configuration\nGame.prototype.initializeGame = function () {\n  var defaultGame = new Game();\n\n  // Pawns:\n  for (var i = 0; i < 8; i++) {\n    defaultGame.piece('pawn', i, 6, 'W');\n    defaultGame.piece('pawn', i, 1, 'B');\n  }\n\n  // Black figs:\n  defaultGame.piece('rook', 0, 0, 'B');\n  defaultGame.piece('knight', 1, 0, 'B');\n  defaultGame.piece('bishop', 2, 0, 'B');\n  defaultGame.piece('queen', 3, 0, 'B');\n  defaultGame.piece('king', 4, 0, 'B');\n  defaultGame.piece('bishop', 5, 0, 'B');\n  defaultGame.piece('knight', 6, 0, 'B');\n  defaultGame.piece('rook', 7, 0, 'B');\n\n  // White figs:\n  defaultGame.piece('rook', 0, 7, 'W');\n  defaultGame.piece('knight', 1, 7, 'W');\n  defaultGame.piece('bishop', 2, 7, 'W');\n  defaultGame.piece('queen', 3, 7, 'W');\n  defaultGame.piece('king', 4, 7, 'W');\n  defaultGame.piece('bishop', 5, 7, 'W');\n  defaultGame.piece('knight', 6, 7, 'W');\n  defaultGame.piece('rook', 7, 7, 'W');\n\n  return defaultGame;\n};\n\nGame.prototype.allMoves = function () {\n  var board = this.board;\n  var allMoves = [];\n  var activeColour = this.activeColour().toUpperCase();\n\n  for (var i = 0; i < 8; i++) {\n    for (var j = 0; j < 8; j++) {\n      if (board[i][j] && board[i][j].color === activeColour) {\n        var validMoves = board[i][j].getValidMoves(true);\n        validMoves.forEach(function (ev) {\n          allMoves.push({\n            color: board[i][j].color,\n            from: { x: j, y: i },\n            to: ev,\n            FENname: board[i][j].FENname\n          });\n        });\n      }\n    }\n  }\n\n  return allMoves;\n};\n\nexports.default = Game;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n//\n// RSG Chess\n// Licensed under Apache 2.0 LICENSE\n\nvar PIECE_CHARS = exports.PIECE_CHARS = {\n  pawn: { W: '♙', B: '♟' },\n  rook: { W: '♖', B: '♜' },\n  knight: { W: '♘', B: '♞' },\n  bishop: { W: '♗', B: '♝' },\n  queen: { W: '♕', B: '♛' },\n  king: { W: '♔', B: '♚' }\n};\n\nfunction Piece(x, y, charBase, color, game, type) {\n  if (charBase) this.char = charBase[color];\n  this.color = color;\n  this.x = x;\n  this.y = y;\n  this.game = game;\n  this.type = type;\n  if (type) {\n    var FENname = type === 'knight' ? 'n' : type.charAt(0);\n    if (this.color === 'W') FENname = FENname.toUpperCase();\n    this.FENname = FENname;\n  }\n}\n\nPiece.empty = function () {\n  return new Piece();\n};\n\nPiece.prototype.getValidMoves = function () {\n  return [{ x: 0, y: 0 }, { x: 7, y: 7 }];\n};\n\nfunction Pawn(x, y, color, game) {\n  Piece.call(this, x, y, PIECE_CHARS.pawn, color, game, 'pawn');\n}\n\nPawn.prototype = Piece.empty();\nPawn.prototype.getValidMoves = function (simulate) {\n  var game = this.game;\n  var moves = [];\n  /* eslint-disable */\n  var y = this.y,\n      x = this.x;\n  var board = game.board,\n      turn = game.turn,\n      length = turn.length;\n  var last, turnTo, turnFrom, figX, passantLast, passantFig;\n  var colorY = this.color === 'W' ? y - 1 : y + 1;\n  var colorY2 = this.color === 'W' ? y - 2 : y + 2;\n  var passantY2 = this.color === 'W' ? 3 : 4;\n  var figXArray = [x - 1, x + 1];\n  /* eslint-enable */\n\n  if (colorY < 8 && colorY >= 0 && !board[colorY][x]) {\n    moves.push({ x: x, y: colorY });\n    if ((y === 1 || y === 6) && colorY2 < 8 && colorY2 >= 0 && !game.board[colorY2][x]) {\n      moves.push({ x: x, y: colorY2 });\n    }\n  }\n\n  for (var i = 0; i < 2; i++) {\n    figX = figXArray[i];\n    if (colorY < 8 && colorY >= 0 && board[colorY][figX] && board[colorY][figX].color !== this.color) moves.push({ x: figX, y: colorY });\n  }\n\n  // Check for en-passant\n  for (var _i = 0; _i < 2; _i++) {\n    figX = figXArray[_i];\n    last = turn[length - 1];\n\n    if (last && last.type === 'pawn' && last.to.x === figX && last.to.y === y && last.color !== this.color && (last.from.y === 1 || last.from.y === 6) && (y === 3 || y === 4)) {\n      moves.push({\n        x: figX,\n        y: colorY,\n        movePiece: {\n          piece: game.board[y][figX],\n          from: {\n            x: figX,\n            y: y\n          },\n          to: null\n        }\n      });\n    }\n  }\n\n  var validMoves = [];\n  if (simulate) {\n    validMoves = game.simulateAndFilter(moves, this);\n  } else {\n    validMoves = moves;\n  }\n\n  return validMoves;\n};\n\nPiece.pawn = function (x, y, color, game) {\n  return new Pawn(x, y, color, game);\n};\n\n// //\n\nfunction Rook(x, y, color, game) {\n  Piece.call(this, x, y, PIECE_CHARS.rook, color, game, 'rook');\n}\n\nRook.prototype = Piece.empty();\nRook.prototype.getValidMoves = function (simulate) {\n  var game = this.game;\n  var moves = [];\n\n  [[-1, 0], [1, 0], [0, 1], [0, -1]].forEach(function (coef) {\n    var index, x, y, piece;\n    for (index = 1;; index++) {\n      x = this.x + coef[0] * index;\n      y = this.y + coef[1] * index;\n      if (y < 0 || y > 7 || x < 0 || x > 7) break;\n\n      piece = game.board[y][x];\n      if (piece && piece.color === this.color) break;\n\n      moves.push({ x: x, y: y });\n      if (piece) break;\n    }\n  }, this);\n\n  var validMoves = [];\n  if (simulate) {\n    validMoves = game.simulateAndFilter(moves, this);\n  } else {\n    validMoves = moves;\n  }\n\n  return validMoves;\n};\n\nPiece.rook = function (x, y, color, game) {\n  return new Rook(x, y, color, game);\n};\n\n// //\n\nfunction Knight(x, y, color, game) {\n  Piece.call(this, x, y, PIECE_CHARS.knight, color, game, 'knight');\n}\n\nKnight.prototype = Piece.empty();\nKnight.prototype.getValidMoves = function (simulate) {\n  var game = this.game;\n  var moves = [];\n\n  var coordinates = [[2, 1], [-2, 1], [1, 2], [-1, 2], [2, -1], [-2, -1], [1, -2], [-1, -2]];\n\n  var one, two;\n  for (var i = 0; i < coordinates.length; i++) {\n    var help = false;\n    var boardPiece;\n    one = coordinates[i][0];\n    two = coordinates[i][1];\n\n    if (this.x + one < 8 && this.x + one >= 0 && this.y + two < 8 && this.y + two >= 0) {\n      boardPiece = game.board[this.y + two][this.x + one];\n      help = boardPiece ? boardPiece.color !== this.color : true;\n    }\n\n    if (help) {\n      moves.push({ x: this.x + one, y: this.y + two });\n    }\n  }\n\n  var validMoves = [];\n  if (simulate) {\n    validMoves = game.simulateAndFilter(moves, this);\n  } else {\n    validMoves = moves;\n  }\n\n  return validMoves;\n};\n\nPiece.knight = function (x, y, color, game) {\n  return new Knight(x, y, color, game);\n};\n\n// //\n\nfunction Bishop(x, y, color, game) {\n  Piece.call(this, x, y, PIECE_CHARS.bishop, color, game, 'bishop');\n}\n\nBishop.prototype = Piece.empty();\nBishop.prototype.getValidMoves = function (simulate) {\n  var game = this.game;\n  var moves = [];\n\n  [[-1, -1], [1, 1], [-1, 1], [1, -1]].forEach(function (coef) {\n    var index, x, y, piece;\n    for (index = 1;; index++) {\n      x = this.x + coef[0] * index;\n      y = this.y + coef[1] * index;\n      if (y < 0 || y > 7 || x < 0 || x > 7) break;\n\n      piece = game.board[y][x];\n      if (piece && piece.color === this.color) break;\n\n      moves.push({ x: x, y: y });\n      if (piece) break;\n    }\n  }, this);\n\n  var validMoves = [];\n  if (simulate) {\n    validMoves = game.simulateAndFilter(moves, this);\n  } else {\n    validMoves = moves;\n  }\n\n  return validMoves;\n};\n\nPiece.bishop = function (x, y, color, game) {\n  return new Bishop(x, y, color, game);\n};\n\n// //\n\nfunction Queen(x, y, color, game) {\n  Piece.call(this, x, y, PIECE_CHARS.queen, color, game, 'queen');\n}\n\nQueen.prototype = Piece.empty();\nQueen.prototype.getValidMoves = function (simulate) {\n  var game = this.game;\n  var rookMoves = Rook.prototype.getValidMoves.call(this);\n  var bishopMoves = Bishop.prototype.getValidMoves.call(this);\n  var moves = rookMoves.concat(bishopMoves);\n\n  var validMoves = [];\n  if (simulate) {\n    validMoves = game.simulateAndFilter(moves, this);\n  } else {\n    validMoves = moves;\n  }\n\n  return validMoves;\n};\n\nPiece.queen = function (x, y, color, game) {\n  return new Queen(x, y, color, game);\n};\n\n// //\n\nfunction King(x, y, color, game) {\n  Piece.call(this, x, y, PIECE_CHARS.king, color, game, 'king');\n}\n\nKing.prototype = Piece.empty();\nKing.prototype.getValidMoves = function (simulate) {\n  var moves = [];\n  var coordinates = [[0, 1], [0, -1], [1, 1], [-1, -1], [1, -1], [-1, 1], [-1, 0], [1, 0]];\n  var x = this.x;\n  var y = this.y;\n  var game = this.game;\n  var turn = game.turn;\n  var self = this;\n\n  coordinates.forEach(function (coord) {\n    var piece;\n    var xx = x + coord[0];\n    var yy = y + coord[1];\n\n    if (xx < 8 && xx >= 0 && yy < 8 && yy >= 0) {\n      piece = game.board[yy][xx];\n      if (!piece || piece.color !== self.color) {\n        moves.push({ x: xx, y: yy });\n      }\n    }\n  });\n\n  // Check king hasn't moved\n  var kingMoved = turn.some(function (turn) {\n    return turn.type === 'king' && turn.color === self.color;\n  });\n\n  if (!kingMoved) {\n    [[0, 2, -1], [7, 6, +1]].forEach(function (props) {\n      var rookX = props[0];\n      var newKingX = props[1];\n      var dir = props[2];\n      var rook = game.board[y][rookX];\n\n      // Check rook on position\n      if (!rook || !rook.type === 'rook') return;\n\n      // Check rook hasn't moved\n      if (turn.some(function (ev) {\n        return ev.from.x === rookX && ev.from.y === y;\n      })) return;\n\n      // Check squares empty and safe\n      for (var xx = x + dir; xx !== rookX; xx += dir) {\n        if (game.board[y][xx]) return;\n        var safe = true;\n        game.board.forEach(function (ev) {\n          ev.forEach(function (evv) {\n            if (evv && evv.type !== 'king' && evv.color !== self.color) {\n              evv.getValidMoves().forEach(function (evMove) {\n                if (evMove && evMove.y === y && evMove.x === xx) safe = false;\n              });\n            }\n          });\n        });\n        if (!safe) return;\n      }\n\n      var rochade = {\n        x: newKingX,\n        y: y,\n        movePiece: {\n          piece: self.game.board[y][rookX],\n          from: {\n            x: rookX, y: y\n          },\n          to: {\n            y: y, x: x + dir\n          }\n        }\n      };\n\n      moves.push(rochade);\n    });\n  }\n\n  var validMoves = [];\n  if (simulate) {\n    validMoves = game.simulateAndFilter(moves, self);\n  } else {\n    validMoves = moves;\n  }\n\n  return validMoves;\n};\n\nPiece.king = function (x, y, color, game) {\n  return new King(x, y, color, game);\n};\n\nexports.Piece = Piece;\nexports.Pawn = Pawn;\nexports.Rook = Rook;\nexports.Knight = Knight;\nexports.Bishop = Bishop;\nexports.Queen = Queen;\nexports.King = King;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _game = __webpack_require__(0);\n\nvar _game2 = _interopRequireDefault(_game);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ChessAI = function ChessAI(depth, gameState, isMaximisingPlayer) {\n  // Clone the gameState to access all game associated methods.\n  // This usually doesn't make sense, but sometimes you cannot post functions to a backend or a web-worker\n  // and that's why we're touching the game methods from new game configuration intead from the passed argument.\n  // So if you pass {board: [myBoard], turn:[myTurn],...} for the game argument it will actually work!\n  // Already described here: https://github.com/RSG-Group/Chess/issues/8#issuecomment-381245794\n  var game = _game2.default.prototype.initializeGame();\n\n  for (var i = 0; i < 8; i++) {\n    for (var j = 0; j < 8; j++) {\n      if (gameState.board[i][j]) {\n        var currentCell = gameState.board[i][j];\n        game.piece(currentCell.type, j, i, currentCell.color);\n      } else {\n        game.board[i][j] = null;\n      }\n    }\n  }\n\n  game.turn = gameState.turn;\n  game.threefold = gameState.threefold;\n  game.FEN = gameState.FEN;\n  game.FENboard = gameState.FENboard;\n\n  // Start looping and simulating all valid moves\n  var allMoves = game.allMoves();\n  var bestValue = -9999;\n  var bestMove;\n\n  for (var i = 0; i < allMoves.length; i++) {\n    var newGameMove = allMoves[i];\n    var undo = game.simpleMove(newGameMove);\n    var boradValue = minimax(depth - 1, game, -10000, 10000, !isMaximisingPlayer);\n    undo();\n    if (boradValue >= bestValue) {\n      bestValue = boradValue;\n      bestMove = newGameMove;\n    }\n  }\n  return bestMove;\n}; //\n// RSG Chess\n// Licensed under Apache 2.0 LICENSE\n\nvar minimax = function minimax(depth, game, alpha, beta, isMaximisingPlayer) {\n  if (depth === 0) {\n    return -evaluateBoard(game.board);\n  }\n\n  var allMoves = game.allMoves();\n  if (isMaximisingPlayer) {\n    var bestValue = -9999;\n    for (var i = 0; i < allMoves.length; i++) {\n      var undo = game.simpleMove(allMoves[i]);\n      bestValue = Math.max(bestValue, minimax(depth - 1, game, alpha, beta, !isMaximisingPlayer));\n      undo();\n      alpha = Math.max(alpha, bestValue);\n      if (beta <= alpha) {\n        return bestValue;\n      }\n    }\n    return bestValue;\n  } else {\n    var _bestValue = 9999;\n    for (var _i = 0; _i < allMoves.length; _i++) {\n      var _undo = game.simpleMove(allMoves[_i]);\n      _bestValue = Math.min(_bestValue, minimax(depth - 1, game, alpha, beta, !isMaximisingPlayer));\n      _undo();\n      beta = Math.min(beta, _bestValue);\n      if (beta <= alpha) {\n        return _bestValue;\n      }\n    }\n    return _bestValue;\n  }\n};\n\nvar evaluateBoard = function evaluateBoard(board) {\n  var totalEvaluation = 0;\n  for (var i = 0; i < 8; i++) {\n    for (var j = 0; j < 8; j++) {\n      // calculate the current evaluation\n      totalEvaluation = totalEvaluation + getPieceValue(board[i][j]);\n    }\n  }\n  // return the total evaluation\n  return totalEvaluation;\n};\n\nvar getPieceValue = function getPieceValue(piece) {\n  if (piece === null) {\n    return 0;\n  }\n\n  // get value for every piece on the board\n  var getAbsoluteValue = function getAbsoluteValue(piece) {\n    if (piece.type === 'pawn') {\n      return 10;\n    } else if (piece.type === 'rook') {\n      return 50;\n    } else if (piece.type === 'knight') {\n      return 30;\n    } else if (piece.type === 'bishop') {\n      return 30;\n    } else if (piece.type === 'queen') {\n      return 90;\n    } else if (piece.type === 'king') {\n      return 900;\n    }\n  };\n\n  // calculate the absolute value and return it\n  var absoluteValue = getAbsoluteValue(piece, piece.color === 'W');\n  return piece.color === 'W' ? absoluteValue : -absoluteValue;\n};\n\n// export the algorithm\nexports.default = ChessAI;\n\n// Written by Radi Cho\n// RSG Chess - by RSG Group\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AI = exports.Pieces = exports.Game = undefined;\n\nvar _game = __webpack_require__(0);\n\nvar _game2 = _interopRequireDefault(_game);\n\nvar _pieces = __webpack_require__(1);\n\nvar Pieces = _interopRequireWildcard(_pieces);\n\nvar _AI = __webpack_require__(2);\n\nvar _AI2 = _interopRequireDefault(_AI);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// And export...\nexports.Game = _game2.default;\nexports.Pieces = Pieces;\nexports.AI = _AI2.default; // Let's import...\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _index = __webpack_require__(3);\n\n// initialize test game configuration\nvar game = _index.Game.prototype.initializeGame();\ngame.moveSelected(game.board[6][0], { y: 5, x: 0 }, function () {}, function () {}, false, false);\n\nvar bestAI = new _index.AI(4, game, true);\n\nconsole.log(bestAI);\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// test.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f78eee713be609155fc8","import { Piece } from './pieces.js'\r\nimport ChessAI from './AI.js'\r\n\r\nfunction Game (promoCallback) {\r\n  // the game board\r\n  this.board = []\r\n  // fill the board\r\n  for (var i = 0; i < 8; i++) {\r\n    var arrayIn = []\r\n    for (var j = 0; j < 8; j++) {\r\n      arrayIn.push(null)\r\n    }\r\n    this.board.push(arrayIn)\r\n  }\r\n\r\n  // the history of all turns\r\n  this.turn = []\r\n  // the current FEN status\r\n  this.FEN = []\r\n  // the current game configuration as FEN\r\n  this.FENboard = []\r\n  // the history of all game configurations displayed using FEN\r\n  this.threefold = []\r\n}\r\n\r\nGame.prototype.piece = function (type, x, y, color) {\r\n  var piece = Piece[type](x, y, color, this)\r\n  this.board[y][x] = piece\r\n\r\n  this.FEN = this.gameToFEN()\r\n  this.FENboard = this.boardToFEN()\r\n}\r\n\r\nGame.prototype.moveSelected = function (\r\n  selected, to, promotionCallback, checkmateCallback, playAgainstAI, simulate\r\n) {\r\n  var x = to.x\r\n  var y = to.y\r\n\r\n  if (selected) {\r\n    var from = { x: selected.x, y: selected.y }\r\n\r\n    if (this.board[y][x] !== selected) {\r\n      var validMoves = selected.getValidMoves(!simulate)\r\n      var validMove = null\r\n\r\n      for (var i = 0; i < validMoves.length; i++) {\r\n        var vm = validMoves[i]\r\n        if (vm.x === x && vm.y === y) {\r\n          validMove = vm\r\n          break\r\n        }\r\n      }\r\n\r\n      if (!validMove) return false\r\n      var movePiece = validMove.movePiece\r\n      var take, paste, rook\r\n      if (movePiece) {\r\n        take = movePiece.from\r\n        paste = movePiece.to\r\n        if (paste === null) {\r\n          this.board[take.y][take.x] = null\r\n        } else {\r\n          rook = this.board[take.y][take.x]\r\n          this.board[paste.y][paste.x] = rook\r\n          rook.x = paste.x\r\n          rook.y = paste.y\r\n          this.board[take.y][take.x] = null\r\n        }\r\n      }\r\n\r\n      var piece = this.board[y][x] ? this.board[y][x] : null\r\n      movePiece = (movePiece ? validMove.movePiece : null)\r\n      this.turn.push({\r\n        from: from,\r\n        to: to,\r\n        color: selected.color,\r\n        type: selected.type,\r\n        piece: piece,\r\n        movePiece: movePiece\r\n      })\r\n\r\n      this.board[y][x] = selected\r\n      this.board[selected.y][selected.x] = null\r\n      this.board[y][x].x = x\r\n      this.board[y][x].y = y\r\n\r\n      this.FEN = this.gameToFEN()\r\n      this.FENboard = this.boardToFEN()\r\n      // check for threefold repetition\r\n\r\n      this.threefold.push(this.FENboard)\r\n      if (selected.type === 'pawn' || piece) this.threefold = []\r\n      if (this.threefoldCheck()) checkmateCallback('D')\r\n\r\n      // check for the fifty-move rule\r\n      if (this.halfmoveClock() >= 50) checkmateCallback('D')\r\n\r\n      // check for pawn promotion\r\n      if (selected.type === 'pawn') {\r\n        if ((selected.color === 'W' && y === 0) || (selected.color === 'B' && y === 7)) {\r\n          if (promotionCallback) {\r\n            if (playAgainstAI && !playAgainstAI.mode && playAgainstAI.comingAI && selected.color === 'B') {\r\n              playAgainstAI.customAIPromotion\r\n                ? playAgainstAI.customAIPromotion()\r\n                : this.promotePawn(selected, x, y, selected.color, 'queen')\r\n            } else {\r\n              promotionCallback(selected, x, y, selected.color)\r\n            }\r\n          }\r\n        }\r\n      };\r\n\r\n      var checkmateColor = selected.color === 'W' ? 'B' : 'W'\r\n      var checkmateValue = this.checkmate(checkmateColor)\r\n      if (checkmateValue) checkmateCallback(checkmateValue)\r\n\r\n      // Play AI\r\n      if (playAgainstAI && playAgainstAI.mode && playAgainstAI.move) {\r\n        if (playAgainstAI.customAIMovement) {\r\n          playAgainstAI.customAIMovement()\r\n        } else {\r\n          var bestMove = ChessAI(playAgainstAI.depth, this, false)\r\n          this.moveSelected(\r\n            this.board[bestMove.from.y][bestMove.from.x],\r\n            bestMove.to,\r\n            promotionCallback,\r\n            checkmateCallback,\r\n            false,\r\n            true,\r\n            simulate\r\n          )\r\n        }\r\n      }\r\n      // end\r\n    }\r\n    selected = null\r\n    return true\r\n  }\r\n}\r\n\r\nGame.prototype.promotePawn = function (pawn, x, y, color, type) {\r\n  this.piece(type, x, y, color)\r\n}\r\n\r\nGame.prototype.simulateAndFilter = function (moves, piece) {\r\n  var validMoves = []\r\n  var self = this\r\n  var board = this.board\r\n\r\n  moves.forEach(function (move, i) {\r\n    var y = move.y\r\n    var x = move.x\r\n    var from = { x: piece.x, y: piece.y }\r\n    var movePiece = board[y][x] ? {\r\n      piece: board[y][x],\r\n      from: { x: x, y: y },\r\n      to: null\r\n    } : null\r\n\r\n    if (move.movePiece) movePiece = move.movePiece\r\n    if (movePiece) self.simpleMovePiece(movePiece.piece, movePiece.from, movePiece.to)\r\n\r\n    self.simpleMovePiece(piece, from, { x: x, y: y })\r\n    var warning = self.warning(piece.color)\r\n\r\n    // Return king\r\n    self.simpleMovePiece(piece, { x: x, y: y }, from)\r\n\r\n    // return the movePiece with simpleMovePiece() method\r\n    if (movePiece) self.simpleMovePiece(movePiece.piece, movePiece.to, movePiece.from)\r\n\r\n    if (!warning) validMoves.push(move)\r\n  })\r\n  return validMoves\r\n}\r\n\r\nGame.prototype.checkmate = function (color) {\r\n  // using let will allow us to make the code a bit simpler\r\n  for (let i = 0; i < 8; i++) {\r\n    for (let j = 0; j < 8; j++) {\r\n      if (\r\n        this.board[i][j] &&\r\n        this.board[i][j].color === color &&\r\n        this.board[i][j].getValidMoves(true).length\r\n      ) return false\r\n    }\r\n  }\r\n  if (this.warning(color)) return color\r\n  return 'D'\r\n}\r\n\r\nGame.prototype.simpleMovePiece = function (piece, from, to) {\r\n  var board = this.board\r\n  if (to) {\r\n    board[to.y][to.x] = piece\r\n    piece.x = to.x\r\n    piece.y = to.y\r\n  }\r\n  if (from) board[from.y][from.x] = null\r\n}\r\n\r\nGame.prototype.simpleMove = function (move) {\r\n  var self = this\r\n  var board = self.board\r\n  var from = move.from\r\n  var to = move.to\r\n  var piece = board[from.y][from.x]\r\n  var capturedPiece = this.board[to.y][to.x] ? this.board[to.y][to.x] : null\r\n  var movePiece = board[to.y][to.x] ? {\r\n    piece: board[to.y][to.x],\r\n    from: { x: to.x, y: to.y },\r\n    to: null\r\n  } : null\r\n\r\n  this.turn.push({\r\n    from: from,\r\n    to: { x: to.x, y: to.y },\r\n    color: move.color,\r\n    type: piece.type,\r\n    piece: capturedPiece,\r\n    movePiece: movePiece\r\n  })\r\n\r\n  if (to.movePiece) movePiece = to.movePiece\r\n  if (movePiece) self.simpleMovePiece(movePiece.piece, movePiece.from, movePiece.to)\r\n  self.simpleMovePiece(piece, from, { x: to.x, y: to.y })\r\n\r\n  return function () {\r\n    // return the current move /ev/\r\n    if (movePiece) self.simpleMovePiece(movePiece.piece, movePiece.to, movePiece.from)\r\n    self.simpleMovePiece(piece, { x: to.x, y: to.y }, from)\r\n    if (capturedPiece) board[to.y][to.x] = capturedPiece\r\n    self.turn.pop()\r\n  }\r\n}\r\n\r\nGame.prototype.warning = function (color) {\r\n  var result = false\r\n  var king\r\n\r\n  this.board.forEach(function (yyy) {\r\n    yyy.forEach(function (xxx) {\r\n      if (xxx && xxx.color === color && xxx.type === 'king') {\r\n        king = xxx\r\n      }\r\n    })\r\n  })\r\n\r\n  this.board.forEach(function (yyy) {\r\n    yyy.forEach(function (xxx) {\r\n      if (xxx && xxx.color !== color) {\r\n        xxx.getValidMoves().forEach(function (mmm) {\r\n          if (mmm.x === king.x && mmm.y === king.y) result = true\r\n        })\r\n      }\r\n    })\r\n  })\r\n  return result\r\n}\r\n\r\nGame.prototype.threefoldCheck = function () {\r\n  var threefold = this.threefold\r\n  var length = threefold.length\r\n\r\n  for (var i = 0; i < length; i++) {\r\n    // using let will allow us to make the code simpler\r\n    let count = 0\r\n    for (var j = i + 1; j < length; j++) {\r\n      if (threefold[i] === threefold[j]) count += 1\r\n    }\r\n    if (count >= 2) return true\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nGame.prototype.pieceToAN = function (x, y) {\r\n  var xChars = 'abcdefgh'\r\n  return xChars.charAt(x) + (8 - y)\r\n}\r\n\r\n// Support FEN functions in the API\r\nGame.prototype.boardToFEN = function () {\r\n  var board = this.board\r\n\r\n  // Convert the board configuration into FEN\r\n  var FENboard = ''\r\n  var missingPieces = 0\r\n  for (var i = 0; i < 8; i++) {\r\n    for (var j = 0; j < 8; j++) {\r\n      if (board[i][j]) {\r\n        if (missingPieces) FENboard += missingPieces\r\n        missingPieces = 0\r\n        FENboard += board[i][j].FENname\r\n      } else {\r\n        missingPieces++\r\n      }\r\n    }\r\n    if (missingPieces) FENboard += missingPieces\r\n    missingPieces = 0\r\n    FENboard += i < 7 ? '/' : ''\r\n  }\r\n\r\n  return FENboard\r\n}\r\n\r\nGame.prototype.halfmoveClock = function () {\r\n  var turn = this.turn\r\n  var length = turn.length\r\n  var count = 0\r\n  if (turn.length === 0) return count\r\n\r\n  var ev = turn[(length - 1) - count]\r\n  while (count <= length - 1 && ev.type !== 'pawn' && !ev.piece) {\r\n    count++\r\n    ev = turn[(length - 1) - count]\r\n  }\r\n\r\n  return count\r\n}\r\n\r\nGame.prototype.activeColour = function () {\r\n  var turn = this.turn\r\n  var activeColor =\r\n    turn.length &&\r\n    turn[turn.length - 1].color === 'W' ? 'b' : 'w'\r\n\r\n  return activeColor\r\n}\r\n\r\nGame.prototype.castlingTarget = function () {\r\n  var board = this.board\r\n  var turn = this.turn\r\n  var possibleCastling = ''\r\n\r\n  var whiteKingMoved\r\n  var blackKingMoved\r\n  turn.forEach(function (turn) {\r\n    whiteKingMoved = turn.type === 'king' && turn.color === 'W'\r\n    blackKingMoved = turn.type === 'king' && turn.color === 'B'\r\n  });\r\n\r\n  [[7, 0], [0, 0], [7, 7], [0, 7]].forEach(function (props) {\r\n    var rookX = props[0]\r\n    var rookY = props[1]\r\n    var rook = board[rookY][rookX]\r\n\r\n    if (rookY === 7 && whiteKingMoved) return\r\n    if (rookY === 0 && blackKingMoved) return\r\n\r\n    // Check rook on position\r\n    if (!rook || !rook.type === 'rook') return\r\n\r\n    // Check rook hasn't moved\r\n    if (turn.some(function (ev) {\r\n      if (ev.type !== 'rook') return false\r\n      return ev.from.x === rookX && ev.from.y === rookY\r\n    })) return\r\n\r\n    var castlingSide = rookX === 0 ? 'q' : 'k'\r\n    possibleCastling += rookY === 0 ? castlingSide.toUpperCase() : castlingSide\r\n  })\r\n\r\n  if (!possibleCastling) possibleCastling = '-'\r\n  return possibleCastling\r\n}\r\n\r\nGame.prototype.enPassantTarget = function () {\r\n  var turn = this.turn\r\n  var enPassantTarget = ''\r\n\r\n  if (turn.length) {\r\n    var ev = turn[turn.length - 1]\r\n    if (ev.color === 'W' && ev.to.y === 4) {\r\n      enPassantTarget = this.pieceToAN(ev.to.x, ev.to.y + 1)\r\n    }\r\n\r\n    if (ev.color === 'B' && ev.to.y === 3) {\r\n      enPassantTarget = this.pieceToAN(ev.to.x, ev.to.y - 1)\r\n    }\r\n  }\r\n\r\n  if (!enPassantTarget) enPassantTarget = '-'\r\n  return enPassantTarget\r\n}\r\n\r\nGame.prototype.fullmoveCount = function () {\r\n  var count = 1\r\n  this.turn.forEach(function (ev) {\r\n    if (ev.color === 'B') count += 1\r\n  })\r\n\r\n  return count\r\n}\r\n\r\nGame.prototype.gameToFEN = function () {\r\n  var FEN = ''\r\n\r\n  // Check the board configuration\r\n  FEN += this.boardToFEN()\r\n\r\n  // Find the active colour\r\n  FEN += ' ' + this.activeColour()\r\n\r\n  // Check castling availability\r\n  FEN += ' ' + this.castlingTarget()\r\n\r\n  // Check the En-passant target\r\n  FEN += ' ' + this.enPassantTarget()\r\n\r\n  // Add the halfmove clock\r\n  FEN += ' ' + this.halfmoveClock()\r\n\r\n  // Add the fullmove number\r\n  FEN += ' ' + this.fullmoveCount()\r\n\r\n  /*\r\n    More information about the FEN notation:\r\n    https://en.wikipedia.org/wiki/Forsyth%E2%80%93Edwards_Notation\r\n    https://chessprogramming.wikispaces.com/Forsyth-Edwards+Notation\r\n  */\r\n\r\n  return FEN\r\n}\r\n\r\n// Set up default game configuration\r\nGame.prototype.initializeGame = function () {\r\n  var defaultGame = new Game()\r\n\r\n  // Pawns:\r\n  for (var i = 0; i < 8; i++) {\r\n    defaultGame.piece('pawn', i, 6, 'W')\r\n    defaultGame.piece('pawn', i, 1, 'B')\r\n  }\r\n\r\n  // Black figs:\r\n  defaultGame.piece('rook', 0, 0, 'B')\r\n  defaultGame.piece('knight', 1, 0, 'B')\r\n  defaultGame.piece('bishop', 2, 0, 'B')\r\n  defaultGame.piece('queen', 3, 0, 'B')\r\n  defaultGame.piece('king', 4, 0, 'B')\r\n  defaultGame.piece('bishop', 5, 0, 'B')\r\n  defaultGame.piece('knight', 6, 0, 'B')\r\n  defaultGame.piece('rook', 7, 0, 'B')\r\n\r\n  // White figs:\r\n  defaultGame.piece('rook', 0, 7, 'W')\r\n  defaultGame.piece('knight', 1, 7, 'W')\r\n  defaultGame.piece('bishop', 2, 7, 'W')\r\n  defaultGame.piece('queen', 3, 7, 'W')\r\n  defaultGame.piece('king', 4, 7, 'W')\r\n  defaultGame.piece('bishop', 5, 7, 'W')\r\n  defaultGame.piece('knight', 6, 7, 'W')\r\n  defaultGame.piece('rook', 7, 7, 'W')\r\n\r\n  return defaultGame\r\n}\r\n\r\nGame.prototype.allMoves = function () {\r\n  var board = this.board\r\n  var allMoves = []\r\n  var activeColour = this.activeColour().toUpperCase()\r\n\r\n  for (var i = 0; i < 8; i++) {\r\n    for (var j = 0; j < 8; j++) {\r\n      if (board[i][j] && board[i][j].color === activeColour) {\r\n        var validMoves = board[i][j].getValidMoves(true)\r\n        validMoves.forEach(function (ev) {\r\n          allMoves.push({\r\n            color: board[i][j].color,\r\n            from: {x: j, y: i},\r\n            to: ev,\r\n            FENname: board[i][j].FENname\r\n          })\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  return allMoves\r\n}\r\n\r\nexport default Game\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/game.js","//\r\n// RSG Chess\r\n// Licensed under Apache 2.0 LICENSE\r\n\r\nexport var PIECE_CHARS = {\r\n  pawn: { W: '♙', B: '♟' },\r\n  rook: { W: '♖', B: '♜' },\r\n  knight: { W: '♘', B: '♞' },\r\n  bishop: { W: '♗', B: '♝' },\r\n  queen: { W: '♕', B: '♛' },\r\n  king: { W: '♔', B: '♚' }\r\n}\r\n\r\nfunction Piece (x, y, charBase, color, game, type) {\r\n  if (charBase) this.char = charBase[color]\r\n  this.color = color\r\n  this.x = x\r\n  this.y = y\r\n  this.game = game\r\n  this.type = type\r\n  if (type) {\r\n    var FENname = type === 'knight' ? 'n' : type.charAt(0)\r\n    if (this.color === 'W') FENname = FENname.toUpperCase()\r\n    this.FENname = FENname\r\n  }\r\n}\r\n\r\nPiece.empty = function () {\r\n  return new Piece()\r\n}\r\n\r\nPiece.prototype.getValidMoves = function () {\r\n  return [\r\n    {x: 0, y: 0},\r\n    {x: 7, y: 7}\r\n  ]\r\n}\r\n\r\nfunction Pawn (x, y, color, game) {\r\n  Piece.call(this, x, y, PIECE_CHARS.pawn, color, game, 'pawn')\r\n}\r\n\r\nPawn.prototype = Piece.empty()\r\nPawn.prototype.getValidMoves = function (simulate) {\r\n  var game = this.game\r\n  var moves = []\r\n  /* eslint-disable */\r\n  var y = this.y, x = this.x\r\n  var board = game.board, turn = game.turn, length = turn.length\r\n  var last, turnTo, turnFrom, figX, passantLast, passantFig\r\n  var colorY = this.color === 'W' ? y - 1 : y + 1  \r\n  var colorY2 = this.color === 'W' ? y - 2 : y + 2  \r\n  var passantY2 = this.color === 'W' ? 3 : 4  \r\n  var figXArray = [x - 1, x + 1]\r\n  /* eslint-enable */\r\n\r\n  if (colorY < 8 && colorY >= 0 && !board[colorY][x]) {\r\n    moves.push({x: x, y: colorY})\r\n    if ((y === 1 || y === 6) && colorY2 < 8 && colorY2 >= 0 && !game.board[colorY2][x]) {\r\n      moves.push({x: x, y: colorY2})\r\n    }\r\n  }\r\n\r\n  for (let i = 0; i < 2; i++) {\r\n    figX = figXArray[i]\r\n    if (colorY < 8 && colorY >= 0 && board[colorY][figX] &&\r\n    board[colorY][figX].color !== this.color) moves.push({x: figX, y: colorY})\r\n  }\r\n\r\n  // Check for en-passant\r\n  for (let i = 0; i < 2; i++) {\r\n    figX = figXArray[i]\r\n    last = turn[length - 1]\r\n\r\n    if (\r\n      last && last.type === 'pawn' && last.to.x === figX && last.to.y === y &&\r\n      last.color !== this.color && (last.from.y === 1 || last.from.y === 6) && (y === 3 || y === 4)\r\n    ) {\r\n      moves.push({\r\n        x: figX,\r\n        y: colorY,\r\n        movePiece: {\r\n          piece: game.board[y][figX],\r\n          from: {\r\n            x: figX,\r\n            y: y\r\n          },\r\n          to: null\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  var validMoves = []\r\n  if (simulate) {\r\n    validMoves = game.simulateAndFilter(moves, this)\r\n  } else {\r\n    validMoves = moves\r\n  }\r\n\r\n  return validMoves\r\n}\r\n\r\nPiece.pawn = function (x, y, color, game) {\r\n  return new Pawn(x, y, color, game)\r\n}\r\n\r\n// //\r\n\r\nfunction Rook (x, y, color, game) {\r\n  Piece.call(this, x, y, PIECE_CHARS.rook, color, game, 'rook')\r\n}\r\n\r\nRook.prototype = Piece.empty()\r\nRook.prototype.getValidMoves = function (simulate) {\r\n  var game = this.game\r\n  var moves = [];\r\n\r\n  [[-1, 0], [1, 0], [0, 1], [0, -1]].forEach(function (coef) {\r\n    var index, x, y, piece\r\n    for (index = 1; ; index++) {\r\n      x = this.x + coef[0] * index\r\n      y = this.y + coef[1] * index\r\n      if (y < 0 || y > 7 || x < 0 || x > 7) break\r\n\r\n      piece = game.board[y][x]\r\n      if (piece && piece.color === this.color) break\r\n\r\n      moves.push({x: x, y: y})\r\n      if (piece) break\r\n    }\r\n  }, this)\r\n\r\n  var validMoves = []\r\n  if (simulate) {\r\n    validMoves = game.simulateAndFilter(moves, this)\r\n  } else {\r\n    validMoves = moves\r\n  }\r\n\r\n  return validMoves\r\n}\r\n\r\nPiece.rook = function (x, y, color, game) {\r\n  return new Rook(x, y, color, game)\r\n}\r\n\r\n// //\r\n\r\nfunction Knight (x, y, color, game) {\r\n  Piece.call(this, x, y, PIECE_CHARS.knight, color, game, 'knight')\r\n}\r\n\r\nKnight.prototype = Piece.empty()\r\nKnight.prototype.getValidMoves = function (simulate) {\r\n  var game = this.game\r\n  var moves = []\r\n\r\n  var coordinates = [ [2, 1], [-2, 1], [1, 2], [-1, 2], [2, -1], [-2, -1], [1, -2], [-1, -2] ]\r\n\r\n  var one, two\r\n  for (var i = 0; i < coordinates.length; i++) {\r\n    var help = false\r\n    var boardPiece\r\n    one = coordinates[i][0]\r\n    two = coordinates[i][1]\r\n\r\n    if (this.x + one < 8 && this.x + one >= 0 && this.y + two < 8 && this.y + two >= 0) {\r\n      boardPiece = game.board[this.y + two][this.x + one]\r\n      help = boardPiece ? boardPiece.color !== this.color : true\r\n    }\r\n\r\n    if (help) {\r\n      moves.push({x: this.x + one, y: this.y + two})\r\n    }\r\n  }\r\n\r\n  var validMoves = []\r\n  if (simulate) {\r\n    validMoves = game.simulateAndFilter(moves, this)\r\n  } else {\r\n    validMoves = moves\r\n  }\r\n\r\n  return validMoves\r\n}\r\n\r\nPiece.knight = function (x, y, color, game) {\r\n  return new Knight(x, y, color, game)\r\n}\r\n\r\n// //\r\n\r\nfunction Bishop (x, y, color, game) {\r\n  Piece.call(this, x, y, PIECE_CHARS.bishop, color, game, 'bishop')\r\n}\r\n\r\nBishop.prototype = Piece.empty()\r\nBishop.prototype.getValidMoves = function (simulate) {\r\n  var game = this.game\r\n  var moves = [];\r\n\r\n  [[-1, -1], [1, 1], [-1, 1], [1, -1]].forEach(function (coef) {\r\n    var index, x, y, piece\r\n    for (index = 1; ; index++) {\r\n      x = this.x + coef[0] * index\r\n      y = this.y + coef[1] * index\r\n      if (y < 0 || y > 7 || x < 0 || x > 7) break\r\n\r\n      piece = game.board[y][x]\r\n      if (piece && piece.color === this.color) break\r\n\r\n      moves.push({x: x, y: y})\r\n      if (piece) break\r\n    }\r\n  }, this)\r\n\r\n  var validMoves = []\r\n  if (simulate) {\r\n    validMoves = game.simulateAndFilter(moves, this)\r\n  } else {\r\n    validMoves = moves\r\n  }\r\n\r\n  return validMoves\r\n}\r\n\r\nPiece.bishop = function (x, y, color, game) {\r\n  return new Bishop(x, y, color, game)\r\n}\r\n\r\n// //\r\n\r\nfunction Queen (x, y, color, game) {\r\n  Piece.call(this, x, y, PIECE_CHARS.queen, color, game, 'queen')\r\n}\r\n\r\nQueen.prototype = Piece.empty()\r\nQueen.prototype.getValidMoves = function (simulate) {\r\n  var game = this.game\r\n  var rookMoves = Rook.prototype.getValidMoves.call(this)\r\n  var bishopMoves = Bishop.prototype.getValidMoves.call(this)\r\n  var moves = rookMoves.concat(bishopMoves)\r\n\r\n  var validMoves = []\r\n  if (simulate) {\r\n    validMoves = game.simulateAndFilter(moves, this)\r\n  } else {\r\n    validMoves = moves\r\n  }\r\n\r\n  return validMoves\r\n}\r\n\r\nPiece.queen = function (x, y, color, game) {\r\n  return new Queen(x, y, color, game)\r\n}\r\n\r\n// //\r\n\r\nfunction King (x, y, color, game) {\r\n  Piece.call(this, x, y, PIECE_CHARS.king, color, game, 'king')\r\n}\r\n\r\nKing.prototype = Piece.empty()\r\nKing.prototype.getValidMoves = function (simulate) {\r\n  var moves = []\r\n  var coordinates = [ [0, 1], [0, -1], [1, 1], [-1, -1], [1, -1], [-1, 1], [-1, 0], [1, 0] ]\r\n  var x = this.x\r\n  var y = this.y\r\n  var game = this.game\r\n  var turn = game.turn\r\n  var self = this\r\n\r\n  coordinates.forEach(function (coord) {\r\n    var piece\r\n    var xx = x + coord[0]\r\n    var yy = y + coord[1]\r\n\r\n    if (xx < 8 && xx >= 0 && yy < 8 && yy >= 0) {\r\n      piece = game.board[yy][xx]\r\n      if (!piece || piece.color !== self.color) {\r\n        moves.push({x: xx, y: yy})\r\n      }\r\n    }\r\n  })\r\n\r\n  // Check king hasn't moved\r\n  var kingMoved = turn.some(function (turn) {\r\n    return turn.type === 'king' && turn.color === self.color\r\n  })\r\n\r\n  if (!kingMoved) {\r\n    [[0, 2, -1], [7, 6, +1]].forEach(function (props) {\r\n      var rookX = props[0]\r\n      var newKingX = props[1]\r\n      var dir = props[2]\r\n      var rook = game.board[y][rookX]\r\n\r\n      // Check rook on position\r\n      if (!rook || !rook.type === 'rook') return\r\n\r\n      // Check rook hasn't moved\r\n      if (turn.some(function (ev) {\r\n        return ev.from.x === rookX && ev.from.y === y\r\n      })) return\r\n\r\n      // Check squares empty and safe\r\n      for (var xx = x + dir; xx !== rookX; xx += dir) {\r\n        if (game.board[y][xx]) return\r\n        var safe = true\r\n        game.board.forEach(function (ev) {\r\n          ev.forEach(function (evv) {\r\n            if (evv && evv.type !== 'king' && evv.color !== self.color) {\r\n              evv.getValidMoves().forEach(function (evMove) {\r\n                if (evMove && evMove.y === y && evMove.x === xx) safe = false\r\n              })\r\n            }\r\n          })\r\n        })\r\n        if (!safe) return\r\n      }\r\n\r\n      var rochade = {\r\n        x: newKingX,\r\n        y: y,\r\n        movePiece: {\r\n          piece: self.game.board[y][rookX],\r\n          from: {\r\n            x: rookX, y: y\r\n          },\r\n          to: {\r\n            y: y, x: x + dir\r\n          }\r\n        }\r\n      }\r\n\r\n      moves.push(rochade)\r\n    })\r\n  }\r\n\r\n  var validMoves = []\r\n  if (simulate) {\r\n    validMoves = game.simulateAndFilter(moves, self)\r\n  } else {\r\n    validMoves = moves\r\n  }\r\n\r\n  return validMoves\r\n}\r\n\r\nPiece.king = function (x, y, color, game) {\r\n  return new King(x, y, color, game)\r\n}\r\n\r\nexport { Piece, Pawn, Rook, Knight, Bishop, Queen, King }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pieces.js","//\r\n// RSG Chess\r\n// Licensed under Apache 2.0 LICENSE\r\n\r\nimport Game from './game.js'\r\n\r\nconst ChessAI = function (depth, gameState, isMaximisingPlayer) {\r\n  // Clone the gameState to access all game associated methods.\r\n  // This usually doesn't make sense, but sometimes you cannot post functions to a backend or a web-worker\r\n  // and that's why we're touching the game methods from new game configuration intead from the passed argument.\r\n  // So if you pass {board: [myBoard], turn:[myTurn],...} for the game argument it will actually work!\r\n  // Already described here: https://github.com/RSG-Group/Chess/issues/8#issuecomment-381245794\r\n  var game = Game.prototype.initializeGame()\r\n\r\n  for (var i = 0; i < 8; i++) {\r\n    for (var j = 0; j < 8; j++) {\r\n      if (gameState.board[i][j]) {\r\n        let currentCell = gameState.board[i][j]\r\n        game.piece(currentCell.type, j, i, currentCell.color)\r\n      } else {\r\n        game.board[i][j] = null\r\n      }\r\n    }\r\n  }\r\n\r\n  game.turn = gameState.turn\r\n  game.threefold = gameState.threefold\r\n  game.FEN = gameState.FEN\r\n  game.FENboard = gameState.FENboard\r\n\r\n  // Start looping and simulating all valid moves\r\n  var allMoves = game.allMoves()\r\n  var bestValue = -9999\r\n  var bestMove\r\n\r\n  for (var i = 0; i < allMoves.length; i++) {\r\n    var newGameMove = allMoves[i]\r\n    var undo = game.simpleMove(newGameMove)\r\n    var boradValue = minimax(depth - 1, game, -10000, 10000, !isMaximisingPlayer)\r\n    undo()\r\n    if (boradValue >= bestValue) {\r\n      bestValue = boradValue\r\n      bestMove = newGameMove\r\n    }\r\n  }\r\n  return bestMove\r\n}\r\n\r\nvar minimax = function (depth, game, alpha, beta, isMaximisingPlayer) {\r\n  if (depth === 0) {\r\n    return -evaluateBoard(game.board)\r\n  }\r\n\r\n  var allMoves = game.allMoves()\r\n  if (isMaximisingPlayer) {\r\n    let bestValue = -9999\r\n    for (let i = 0; i < allMoves.length; i++) {\r\n      let undo = game.simpleMove(allMoves[i])\r\n      bestValue = Math.max(bestValue, minimax(depth - 1, game, alpha, beta, !isMaximisingPlayer))\r\n      undo()\r\n      alpha = Math.max(alpha, bestValue)\r\n      if (beta <= alpha) {\r\n        return bestValue\r\n      }\r\n    }\r\n    return bestValue\r\n  } else {\r\n    let bestValue = 9999\r\n    for (let i = 0; i < allMoves.length; i++) {\r\n      let undo = game.simpleMove(allMoves[i])\r\n      bestValue = Math.min(bestValue, minimax(depth - 1, game, alpha, beta, !isMaximisingPlayer))\r\n      undo()\r\n      beta = Math.min(beta, bestValue)\r\n      if (beta <= alpha) {\r\n        return bestValue\r\n      }\r\n    }\r\n    return bestValue\r\n  }\r\n}\r\n\r\nvar evaluateBoard = function (board) {\r\n  var totalEvaluation = 0\r\n  for (var i = 0; i < 8; i++) {\r\n    for (var j = 0; j < 8; j++) {\r\n      // calculate the current evaluation\r\n      totalEvaluation = totalEvaluation + getPieceValue(board[i][j])\r\n    }\r\n  }\r\n  // return the total evaluation\r\n  return totalEvaluation\r\n}\r\n\r\nvar getPieceValue = function (piece) {\r\n  if (piece === null) {\r\n    return 0\r\n  }\r\n\r\n  // get value for every piece on the board\r\n  var getAbsoluteValue = function (piece) {\r\n    if (piece.type === 'pawn') {\r\n      return 10\r\n    } else if (piece.type === 'rook') {\r\n      return 50\r\n    } else if (piece.type === 'knight') {\r\n      return 30\r\n    } else if (piece.type === 'bishop') {\r\n      return 30\r\n    } else if (piece.type === 'queen') {\r\n      return 90\r\n    } else if (piece.type === 'king') {\r\n      return 900\r\n    }\r\n  }\r\n\r\n  // calculate the absolute value and return it\r\n  var absoluteValue = getAbsoluteValue(piece, piece.color === 'W')\r\n  return piece.color === 'W' ? absoluteValue : -absoluteValue\r\n}\r\n\r\n// export the algorithm\r\nexport default ChessAI\r\n\r\n// Written by Radi Cho\r\n// RSG Chess - by RSG Group\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/AI.js","// Let's import...\r\nimport Game from './game'\r\nimport * as Pieces from './pieces'\r\nimport AI from './AI'\r\n\r\n// And export...\r\nexport {\r\n  Game,\r\n  Pieces,\r\n  AI\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import { Game, AI } from '../src/index'\r\n\r\n// initialize test game configuration\r\nconst game = Game.prototype.initializeGame()\r\ngame.moveSelected(\r\n  game.board[6][0], { y: 5, x: 0 }, () => {}, () => {}, false, false\r\n)\r\n\r\nconst bestAI = new AI(4, game, true)\r\n\r\nconsole.log(bestAI)\r\n\n\n\n// WEBPACK FOOTER //\n// ./test/index.js"],"sourceRoot":""}